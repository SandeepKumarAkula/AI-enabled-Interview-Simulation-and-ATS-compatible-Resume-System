@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

:root {
  /* Updated to Overleaf-inspired green and clean white palette */
  --background: #ffffff;
  --foreground: #222222;
  --card: #ffffff;
  --card-foreground: #222222;
  --popover: #ffffff;
  --popover-foreground: #222222;
  --primary: #2ecc71;
  --primary-foreground: #ffffff;
  --secondary: #f7f7f7;
  --secondary-foreground: #222222;
  --muted: #f0f0f0;
  --muted-foreground: #666666;
  --accent: #27ae60;
  --accent-foreground: #ffffff;
  --destructive: #dc2626;
  --destructive-foreground: #ffffff;
  --border: #e0e0e0;
  --input: #f7f7f7;
  --ring: #2ecc71;
  --chart-1: #2ecc71;
  --chart-2: #27ae60;
  --chart-3: #d5f4e6;
  --chart-4: #ecfdf5;
  --chart-5: #a8e6c1;
  --radius: 0.375rem;
  --sidebar: #ffffff;
  --sidebar-foreground: #222222;
  --sidebar-primary: #2ecc71;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: #f7f7f7;
  --sidebar-accent-foreground: #222222;
  --sidebar-border: #e0e0e0;
  --sidebar-ring: #2ecc71;
}

.dark {
  --background: #1a1a1a;
  --foreground: #f5f5f5;
  --card: #2d2d2d;
  --card-foreground: #f5f5f5;
  --popover: #2d2d2d;
  --popover-foreground: #f5f5f5;
  --primary: #2ecc71;
  --primary-foreground: #1a1a1a;
  --secondary: #3d3d3d;
  --secondary-foreground: #f5f5f5;
  --muted: #4d4d4d;
  --muted-foreground: #a0a0a0;
  --accent: #27ae60;
  --accent-foreground: #f5f5f5;
  --destructive: #f87171;
  --destructive-foreground: #f5f5f5;
  --border: #3d3d3d;
  --input: #3d3d3d;
  --ring: #2ecc71;
  --chart-1: #2ecc71;
  --chart-2: #27ae60;
  --chart-3: #d5f4e6;
  --chart-4: #ecfdf5;
  --chart-5: #a8e6c1;
  --sidebar: #2d2d2d;
  --sidebar-foreground: #f5f5f5;
  --sidebar-primary: #2ecc71;
  --sidebar-primary-foreground: #f5f5f5;
  --sidebar-accent: #3d3d3d;
  --sidebar-accent-foreground: #f5f5f5;
  --sidebar-border: #3d3d3d;
  --sidebar-ring: #2ecc71;
}

@theme inline {
  --font-sans: "Geist", "Geist Fallback";
  --font-mono: "Geist Mono", "Geist Mono Fallback";
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 2px);
  --radius-md: var(--radius);
  --radius-lg: calc(var(--radius) + 4px);
  --radius-xl: calc(var(--radius) + 8px);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Prevent browser-native password reveal icons from duplicating custom toggle */
input[type="password"]::-ms-reveal,
input[type="password"]::-ms-clear {
  display: none;
}

/* Site badge tooltip styles - cursor following */
.site-badge-tooltip {
  position: fixed;
  transform: translate(-50%, 0);
  pointer-events: none;
  padding: 8px 10px;
  background: var(--popover);
  color: var(--popover-foreground);
  border-radius: 6px;
  border: 1px solid var(--border);
  font-size: 13px;
  white-space: nowrap;
  z-index: 9999;
  opacity: 0;
  transition: opacity 120ms ease, transform 120ms ease;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}
.site-badge-tooltip.visible {
  opacity: 1;
  transform: translate(-50%, 0);
}

/* Nav badge tooltip styles - static positioning */
.nav-badge-tooltip {
  position: absolute;
  bottom: -35px;
  left: 50%;
  transform: translateX(-50%);
  pointer-events: none;
  padding: 8px 10px;
  background: var(--popover);
  color: var(--popover-foreground);
  border-radius: 6px;
  border: 1px solid var(--border);
  font-size: 12px;
  white-space: nowrap;
  z-index: 9999;
  opacity: 0;
  transition: opacity 120ms ease;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}
.nav-badge-tooltip.visible {
  opacity: 1;
}

/* Hide the floating site badge (top-left) - use nav badge instead */
.site-badge {
  display: none !important;
}

/* Slight adapt for small screens */
@media (max-width: 640px) {
  .site-badge { display: none; }
}

/* DEV convenience: hide Next.js dev floating badge (the circular "N" SVG)
   This is injected by the Next dev client in development mode. It won't
   be present in production builds. The selector matches the SVG shape
   used by the dev badge and hides it during local development. */
svg:has(defs [id^="next_logo"]) {
  display: none !important;
}

/* Fallback: also hide common small fixed SVG badges (40x40) at bottom-left */
svg[width="40"][height="40"] {
  display: none !important;
}
/* Toast animations */
@keyframes slideIn {
  from {
    transform: translateX(400px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOut {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(400px);
    opacity: 0;
  }
}

.animate-slide-in {
  animation: slideIn 0.3s ease-out;
}

/* Global loader system */
.global-loader {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: auto;
  z-index: 9998;
  transition: opacity 180ms ease;
}

.global-loader--fade {
  opacity: 0;
}

.global-loader__backdrop {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 20% 20%, rgba(46, 204, 113, 0.08), transparent 35%),
    radial-gradient(circle at 80% 30%, rgba(39, 174, 96, 0.08), transparent 40%),
    rgba(0, 0, 0, 0.04);
  backdrop-filter: blur(6px);
}

.global-loader__card {
  position: relative;
  width: min(420px, 92vw);
  padding: 22px 22px 18px;
  border-radius: 18px;
  background: color-mix(in srgb, var(--card) 92%, var(--primary) 8%);
  border: 1px solid color-mix(in srgb, var(--border) 70%, var(--primary) 30%);
  box-shadow: 0 18px 48px rgba(0, 0, 0, 0.12), 0 1px 0 rgba(255, 255, 255, 0.25);
  overflow: hidden;
  pointer-events: auto;
}

.global-loader__halo {
  position: absolute;
  inset: -40%;
  background: radial-gradient(circle, rgba(46, 204, 113, 0.12) 0%, transparent 60%);
  filter: blur(24px);
  opacity: 0.9;
}

.global-loader__orb {
  position: relative;
  width: 96px;
  height: 96px;
  margin: 0 auto 16px;
  display: grid;
  place-items: center;
}

.global-loader__core {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: linear-gradient(145deg, var(--primary), color-mix(in srgb, var(--accent) 70%, var(--primary) 30%));
  box-shadow: 0 0 0 6px rgba(46, 204, 113, 0.12), 0 12px 28px rgba(0, 0, 0, 0.12);
  animation: loaderPulse 1.6s ease-in-out infinite;
}

.global-loader__orbit {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  border: 1px solid color-mix(in srgb, var(--primary) 50%, transparent 50%);
  opacity: 0.7;
}

.global-loader__orbit--one {
  animation: loaderOrbit 2.8s linear infinite;
}

.global-loader__orbit--two {
  transform: scale(0.82);
  animation: loaderOrbit 2.8s linear infinite reverse;
  opacity: 0.4;
}

.global-loader__bar {
  position: relative;
  height: 12px;
  width: 100%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(46, 204, 113, 0.15), rgba(39, 174, 96, 0.05));
  overflow: hidden;
  border: 1px solid color-mix(in srgb, var(--border) 80%, var(--primary) 20%);
}

.global-loader__bar-fill {
  position: absolute;
  inset: 0;
  width: 8%;
  background: linear-gradient(90deg, color-mix(in srgb, var(--primary) 80%, var(--accent) 20%), var(--accent));
  box-shadow: 0 0 18px rgba(46, 204, 113, 0.45);
  border-radius: 999px;
  transition: width 180ms ease;
}

.global-loader__bar-sheen {
  position: absolute;
  inset: 0;
  background: linear-gradient(110deg, transparent 0%, rgba(255, 255, 255, 0.28) 45%, transparent 60%);
  animation: loaderSheen 1.6s ease-in-out infinite;
  pointer-events: none;
}

.global-loader__dots {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin: 12px 0 6px;
}

.global-loader__dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: color-mix(in srgb, var(--primary) 85%, var(--accent) 15%);
  box-shadow: 0 0 12px rgba(46, 204, 113, 0.6);
  animation: loaderDots 780ms ease-in-out infinite;
}

.global-loader__label {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--foreground);
  margin-top: 4px;
}

.global-loader__percent {
  color: color-mix(in srgb, var(--primary) 60%, var(--foreground) 40%);
  font-variant-numeric: tabular-nums;
}

.global-loader__orb.is-pulsing .global-loader__core {
  animation-duration: 1.2s;
}

@keyframes loaderOrbit {
  to {
    transform: rotate(360deg);
  }
}

@keyframes loaderPulse {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 6px rgba(46, 204, 113, 0.14);
  }
  55% {
    transform: scale(1.06);
    box-shadow: 0 0 0 12px rgba(39, 174, 96, 0.18);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 6px rgba(46, 204, 113, 0.14);
  }
}

@keyframes loaderSheen {
  0% {
    transform: translateX(-40%);
  }
  100% {
    transform: translateX(140%);
  }
}

@keyframes loaderDots {
  0%,
  100% {
    transform: translateY(0);
    opacity: 0.7;
  }
  50% {
    transform: translateY(-6px);
    opacity: 1;
  }
}